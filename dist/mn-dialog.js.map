{"version":3,"sources":["scripts/mn-dialog.class.js"],"names":["MnDialog","self","_this","_ret","_classCallCheck","this","setCard","setOpenEvents","setCloseEvents","_possibleConstructorReturn","putInCard","element","card","appendChild","cardClass","cssClass","validClasses","isValidClass","indexOf","_this2","document","createElement","classList","add","Array","from","filter","forEach","remove","children","insertBefore","firstChild","setEventListener","button","addEventListener","event","openDialog","stopPropagation","id","buttons","querySelectorAll","open","_this3","close","esc","keyCode","clickOutside","target","closest","dialog","getAttribute","querySelector","scrollTop","window","MnBackdrop","show","body","previousDialog","hide","HTMLElement","customElements","define"],"mappings":"sxCAAMA,SAAAA,SAAAA,cACJ,QAAAA,UAAYC,MAAM,GAAAC,OAAAC,IAKhB,OALgBC,iBAAAC,KAAAL,UAChBC,KAAAA,MAAAA,2BAAAA,MAAAA,SAAAA,WAAAA,OAAAA,eAAAA,WAAAA,KAAAA,KAAaA,OACbC,MAAKI,UACLJ,MAAKK,gBACLL,MAAKM,iBACLL,KAAOF,KAAPQ,2BAAAP,MAAAC,qGAqBA,QAASO,WAAUC,SACjBC,KAAKC,YAAYF,SAKnB,QAASG,WAAUC,UACjB,GAAMC,eACJ,iBACA,WAGIC,aAAeD,aAAaE,QAAQH,WAAY,CAEtD,OAAOE,cAhCD,GAAAE,QAAAd,KACFO,KAAOQ,SAASC,cAAc,MAEpCT,MAAKU,UAAUC,IAAI,WAEnBC,MACGC,KAAKpB,KAAKiB,WACVI,OAAOZ,WAEPa,QAAQ,SAAAZ,UACPI,OAAKG,UAAUM,OAAOb,UACtBH,KAAKU,UAAUC,IAAIR,YAGvBS,MACGC,KAAKpB,KAAKwB,UACVF,QAAQjB,WAMXL,KAAKyB,aAAalB,KAAMP,KAAK0B,oDAuB7B,QAASC,kBAAiBC,QACxBA,OAAOC,iBAAiB,QAAS,SAACC,OAChCC,WAAWD,OACXA,MAAME,oBAXV,GAAMC,IAAKjC,KAAKiC,GACVC,QAAUnB,SAASoB,iBAAT,uBAAiDF,GAAjD,MACZF,WAAa/B,KAAKoC,IAEtBjB,OACGC,KAAKc,SACLZ,QAAQK,2DAUI,GAAAU,QAAArC,KACTkC,QAAUnB,SAASoB,iBAAiB,iBAE1ChB,OACGC,KAAKc,SACLZ,QAAQ,SAAAM,QAAA,MAAUA,QAAOC,iBAAiB,QAAS,WAAA,MAAMQ,QAAKC,YAEjEvB,SAASc,iBAAiB,QAAS,WACjC,GAAMU,KAAwB,KAAlBT,MAAMU,OAEdD,MACFF,OAAKC,UAITtC,KAAK6B,iBAAiB,QAAS,SAAAC,OAC7B,GAAMW,eAAgBX,MAAMY,OAAOC,QAAQ,WAEvCF,eACFJ,OAAKC,uCAKNR,OACH,GAAIG,IAAAA,OACAW,OAAAA,MAEAd,QACFG,GAAKH,MAAMY,OAAOG,aAAa,eAC/BD,OAAS7B,SAAS+B,cAAT,aAAoCb,KAE7CW,OAAS5C,KAEX4C,OAAOG,UAAY,EACnBC,OAAOC,WAAWC,OAClBnC,SAASoC,KAAKlC,UAAUC,IAAI,oBAE5B,IAAMkC,gBAAiBrC,SAAS+B,cAAc,oBAC1CM,iBACFA,eAAenC,UAAUM,OAAO,WAElCqB,OAAO3B,UAAUC,IAAI,2CAIrB8B,OAAOC,WAAWI,OAClBtC,SAASoC,KAAKlC,UAAUM,OAAO,qBAC/BvB,KAAKiB,UAAUM,OAAO,yBA9GH+B,YAkHvBN,QAAOO,eAAeC,OAAO,YAAa7D","file":"mn-dialog.js","sourcesContent":["class MnDialog extends HTMLElement {\n  constructor(self) {\n    self = super(self)\n    this.setCard()\n    this.setOpenEvents()\n    this.setCloseEvents()\n    return self\n  }\n\n  setCard() {\n    const card = document.createElement('div')\n\n    card.classList.add('mn-card')\n\n    Array\n      .from(this.classList)\n      .filter(cardClass)\n      // assign classes to card\n      .forEach(cssClass => {\n        this.classList.remove(cssClass)\n        card.classList.add(cssClass)\n      })\n\n    Array\n      .from(this.children)\n      .forEach(putInCard)\n\n    function putInCard(element) {\n      card.appendChild(element)\n    }\n\n    this.insertBefore(card, this.firstChild)\n\n    function cardClass(cssClass) {\n      const validClasses = [\n        'padding-header',\n        'padding'\n      ]\n\n      const isValidClass = validClasses.indexOf(cssClass) > -1\n\n      return isValidClass\n    }\n  }\n\n  setOpenEvents() {\n    const id = this.id\n    const buttons = document.querySelectorAll(`button[open-dialog=\"${id}\"]`)\n    let openDialog = this.open\n\n    Array\n      .from(buttons)\n      .forEach(setEventListener)\n\n    function setEventListener(button) {\n      button.addEventListener('click', (event) => {\n        openDialog(event)\n        event.stopPropagation()\n      })\n    }\n  }\n\n  setCloseEvents() {\n    const buttons = document.querySelectorAll('[close-dialog]')\n\n    Array\n      .from(buttons)\n      .forEach(button => button.addEventListener('click', () => this.close()))\n\n    document.addEventListener('keyup', () => {\n      const esc = event.keyCode === 27\n\n      if (esc) {\n        this.close()\n      }\n    })\n\n    this.addEventListener('click', event => {\n      const clickOutside = !event.target.closest('.mn-card')\n\n      if (clickOutside) {\n        this.close()\n      }\n    })\n  }\n\n  open(event) {\n    let id\n    let dialog\n\n    if (event) {\n      id = event.target.getAttribute('open-dialog')\n      dialog = document.querySelector(`mn-dialog#${id}`)\n    } else {\n      dialog = this\n    }\n    dialog.scrollTop = 0\n    window.MnBackdrop.show()\n    document.body.classList.add('mn-dialog-visible')\n\n    const previousDialog = document.querySelector('mn-dialog.visible')\n    if (previousDialog) {\n      previousDialog.classList.remove('visible')\n    }\n    dialog.classList.add('visible')\n  }\n\n  close() {\n    window.MnBackdrop.hide()\n    document.body.classList.remove('mn-dialog-visible')\n    this.classList.remove('visible')\n  }\n}\n\nwindow.customElements.define('mn-dialog', MnDialog)\n"]}
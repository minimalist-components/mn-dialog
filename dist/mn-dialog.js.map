{"version":3,"sources":["scripts/mn-dialog.class.js"],"names":["MnDialog","self","_this","_ret","_classCallCheck","this","setCard","setOpenEvents","setCloseEvents","_possibleConstructorReturn","putInCard","element","card","appendChild","cardClass","cssClass","validClasses","isValidClass","indexOf","_this2","document","createElement","classList","add","Array","from","filter","forEach","console","log","remove","children","insertBefore","firstChild","setEventListener","button","addEventListener","openDialog","id","buttons","querySelectorAll","open","close","body","esc","event","keyCode","isOpened","contains","dialog","querySelector","target","getAttribute","previousDialog","stopPropagation","clickButtonClose","clickOutside","tagName","HTMLElement","customElements","define"],"mappings":"sxCAAMA,SAAAA,SAAAA,cACJ,QAAAA,UAAYC,MAAM,GAAAC,OAAAC,IAKhB,OALgBC,iBAAAC,KAAAL,UAChBC,KAAAA,MAAAA,2BAAAA,MAAAA,SAAAA,WAAAA,OAAAA,eAAAA,WAAAA,KAAAA,KAAaA,OACbC,MAAKI,UACLJ,MAAKK,gBACLL,MAAKM,iBACLL,KAAOF,KAAPQ,2BAAAP,MAAAC,qGAsBA,QAASO,WAAUC,SACjBC,KAAKC,YAAYF,SAKnB,QAASG,WAAUC,UACjB,GAAMC,eACJ,iBACA,WAGIC,aAAeD,aAAaE,QAAQH,WAAY,CAEtD,OAAOE,cAjCD,GAAAE,QAAAd,KACFO,KAAOQ,SAASC,cAAc,MAEpCT,MAAKU,UAAUC,IAAI,WAEnBC,MACGC,KAAKpB,KAAKiB,WACVI,OAAOZ,WAEPa,QAAQ,SAAAZ,UACPa,QAAQC,IAAId,UACZI,OAAKG,UAAUQ,OAAOf,UACtBH,KAAKU,UAAUC,IAAIR,YAGvBS,MACGC,KAAKpB,KAAK0B,UACVJ,QAAQjB,WAMXL,KAAK2B,aAAapB,KAAMP,KAAK4B,oDAuB7B,QAASC,kBAAiBC,QACxBA,OAAOC,iBAAiB,QAASC,YATnC,GAAMC,IAAKjC,KAAKiC,GACVC,QAAUnB,SAASoB,iBAAT,4BAAsDF,GAAtD,MACZD,WAAahC,KAAKoC,IAEtBjB,OACGC,KAAKc,SACLZ,QAAQO,2DAQX,GAAMK,SAAUnB,SAASoB,iBAAiB,uBACpCE,MAAQrC,KAAKqC,KAEnBlB,OACGC,KAAKc,SACLZ,QAAQ,SAAAQ,QAAA,MAAUA,QAAOC,iBAAiB,QAASM,SAEtDtB,SAASuB,KAAKP,iBAAiB,QAASM,OACxCtB,SAASgB,iBAAiB,QAAS,WACjC,GAAMQ,KAAwB,KAAlBC,MAAMC,QACdC,SAAW3B,SAASuB,KAAKrB,UAAU0B,SAAS,mBAChD,IAAIJ,KAAOG,SAAU,CACnB,GAAME,QAAS7B,SAAS8B,cAAc,mBACtC9B,UAASuB,KAAKrB,UAAUQ,OAAO,oBAC/BmB,OAAO3B,UAAUQ,OAAO,4CAM5B,GAAMQ,IAAKO,MAAMM,OAAOC,aAAa,oBACjCH,OAAS7B,SAAS8B,cAAT,aAAoCZ,GAEjDlB,UAASuB,KAAKrB,UAAUC,IAAI,mBAE5B,IAAM8B,gBAAiBjC,SAAS8B,cAAc,mBAC1CG,iBACFA,eAAe/B,UAAUQ,OAAO,UAElCmB,OAAO3B,UAAUC,IAAI,wCAGjBsB,OACJA,MAAMS,iBACN,IAAMC,kBAAmBV,MAAMM,OAAOC,aAAa,qBAC7CI,aAAwC,SAAzBX,MAAMM,OAAOM,SAAsBZ,MAAMM,OAAO7B,UAAU0B,SAAS,mBAExF,IAAIO,kBAAoBC,aAAc,CACpC,GAAMP,QAAS7B,SAAS8B,cAAc,mBACtC9B,UAASuB,KAAKrB,UAAUQ,OAAO,oBAC/BmB,OAAO3B,UAAUQ,OAAO,yBArGP4B,YA0GvBC,gBAAeC,OAAO,YAAa5D","file":"mn-dialog.js","sourcesContent":["class MnDialog extends HTMLElement {\n  constructor(self) {\n    self = super(self)\n    this.setCard()\n    this.setOpenEvents()\n    this.setCloseEvents()\n    return self\n  }\n\n  setCard() {\n    const card = document.createElement('div')\n\n    card.classList.add('mn-card')\n\n    Array\n      .from(this.classList)\n      .filter(cardClass)\n      // assign classes to card\n      .forEach(cssClass => {\n        console.log(cssClass)\n        this.classList.remove(cssClass)\n        card.classList.add(cssClass)\n      })\n\n    Array\n      .from(this.children)\n      .forEach(putInCard)\n\n    function putInCard(element) {\n      card.appendChild(element)\n    }\n\n    this.insertBefore(card, this.firstChild)\n\n    function cardClass(cssClass) {\n      const validClasses = [\n        'padding-header',\n        'padding'\n      ]\n\n      const isValidClass = validClasses.indexOf(cssClass) > -1\n\n      return isValidClass\n    }\n  }\n\n  setOpenEvents() {\n    const id = this.id\n    const buttons = document.querySelectorAll(`button[data-open-dialog=\"${id}\"]`)\n    let openDialog = this.open\n\n    Array\n      .from(buttons)\n      .forEach(setEventListener)\n\n    function setEventListener(button) {\n      button.addEventListener('click', openDialog)\n    }\n  }\n\n  setCloseEvents() {\n    const buttons = document.querySelectorAll('[data-close-dialog]')\n    const close = this.close\n\n    Array\n      .from(buttons)\n      .forEach(button => button.addEventListener('click', close))\n\n    document.body.addEventListener('click', close)\n    document.addEventListener('keyup', () => {\n      const esc = event.keyCode === 27\n      let isOpened = document.body.classList.contains('mn-dialog-opened')\n      if (esc && isOpened) {\n        const dialog = document.querySelector('mn-dialog.opened')\n        document.body.classList.remove('mn-dialog-opened')\n        dialog.classList.remove('opened')\n      }\n    })\n  }\n\n  open() {\n    const id = event.target.getAttribute('data-open-dialog')\n    let dialog = document.querySelector(`mn-dialog#${id}`)\n\n    document.body.classList.add('mn-dialog-opened')\n\n    const previousDialog = document.querySelector('mn-dialog.opened')\n    if (previousDialog) {\n      previousDialog.classList.remove('opened')\n    }\n    dialog.classList.add('opened')\n  }\n\n  close(event) {\n    event.stopPropagation()\n    const clickButtonClose = event.target.getAttribute('data-close-dialog')\n    const clickOutside = event.target.tagName === 'BODY' && event.target.classList.contains('mn-dialog-opened')\n\n    if (clickButtonClose || clickOutside) {\n      const dialog = document.querySelector('mn-dialog.opened')\n      document.body.classList.remove('mn-dialog-opened')\n      dialog.classList.remove('opened')\n    }\n  }\n}\n\ncustomElements.define('mn-dialog', MnDialog)\n"]}
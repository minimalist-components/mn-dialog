{"version":3,"sources":["scripts/mn-dialog.component.js"],"names":["toggle","body","classList","dialog","close","remove","hideDialog","event","target","contains","escapeKeyUp","esc","keyCode","dialogOpened","setMotionBlur","setBlur","x","y","blurFilter","setAttribute","getOffset","el","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","updateMotionBlur","currentPos","xDiff","Math","abs","lastPos","multiplier","yDiff","requestAnimationFrame","blur","querySelector","firstElementChild","trigger","addEventListener"],"mappings":"AAAA,YAWA,SAASA,UACPC,KAAKC,UAAUF,OAAO,oBACtBG,OAAOD,UAAUF,OAAO,UAG1B,QAASI,SACPH,KAAKC,UAAUG,OAAO,oBACtBF,OAAOD,UAAUG,OAAO,UAG1B,QAASC,YAAWC,OACdA,MAAMC,OAAON,UAAUO,SAAS,qBAClCL,QAIJ,QAASM,aAAYH,OACnB,GAAII,KAAwB,KAAlBJ,MAAMK,QACZC,aAAeZ,KAAKC,UAAUO,SAAS,mBACvCE,MAAOE,cACTT,QAIJ,QAASU,iBASP,QAASC,SAAQC,EAAEC,GACjBC,WAAWC,aAAa,eAAmBH,EAA3C,IAAgDC,GAGlD,QAASG,WAAWC,IAClB,GAAMC,KAAMD,GAAGE,uBAEf,QACEC,IAAKF,IAAIE,IAAMC,OAAOC,YAAcC,SAASC,gBAAgBC,UAC7DC,KAAMR,IAAIQ,KAAOL,OAAOM,YAAcJ,SAASC,gBAAgBI,YAInE,QAASC,oBAEP,GAAIC,YAAad,UAAUjB,QAGvBgC,MAAQC,KAAKC,IAAIH,WAAWJ,KAAOQ,QAAQR,MAAQS,WACnDC,MAAQJ,KAAKC,IAAIH,WAAWV,IAAMc,QAAQd,KAAOe,UAGrDxB,SAAQoB,MAAMK,OACdF,QAAUJ,WAEVO,sBAAsBR,kBAjCxB,GAAIS,MAAOf,SAASgB,cAAc,gBAC9BzB,WAAawB,KAAKE,kBAElBN,QAAUlB,UAAUjB,QACpBoC,WAAa,GAEjBN,oBAxCF,GAAIY,SAAUlB,SAASgB,cAAc,kBACjCxC,OAASwB,SAASgB,cAAc,cAChC1C,KAAO0B,SAASgB,cAAc,OAElCE,SAAQC,iBAAiB,QAAS9C,QAClCC,KAAK6C,iBAAiB,QAASxC,YAC/BqB,SAASmB,iBAAiB,QAASpC,aACnCI","file":"mn-dialog.js","sourcesContent":["'use strict';\n\nlet trigger = document.querySelector('.toggle-dialog');\nlet dialog = document.querySelector('.mn-dialog');\nlet body = document.querySelector('body');\n\ntrigger.addEventListener('click', toggle);\nbody.addEventListener('click', hideDialog);\ndocument.addEventListener('keyup', escapeKeyUp);\nsetMotionBlur();\n\nfunction toggle() {\n  body.classList.toggle('mn-dialog-opened');\n  dialog.classList.toggle('opened');\n}\n\nfunction close() {\n  body.classList.remove('mn-dialog-opened');\n  dialog.classList.remove('opened');\n}\n\nfunction hideDialog(event) {\n  if (event.target.classList.contains('mn-dialog-opened')) {\n    close();\n  }\n}\n\nfunction escapeKeyUp(event) {\n  let esc = event.keyCode === 27;\n  let dialogOpened = body.classList.contains('mn-dialog-opened');\n  if (esc && dialogOpened) {\n    close();\n  }\n}\n\nfunction setMotionBlur() {\n  let blur = document.querySelector('#motion-blur'); // the blur filter\n  let blurFilter = blur.firstElementChild;\n\n  let lastPos = getOffset(dialog);\n  let multiplier = 0.25;\n\n  updateMotionBlur();\n\n  function setBlur(x,y){\n    blurFilter.setAttribute('stdDeviation', `${x},${y}`);\n  }\n\n  function getOffset (el) {\n    const box = el.getBoundingClientRect();\n\n    return {\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\n    };\n  }\n\n  function updateMotionBlur() {\n    // get the current position of the element\n    let currentPos = getOffset(dialog);\n\n    // calculate the changes from the last frame and apply the multiplier\n    let xDiff = Math.abs(currentPos.left - lastPos.left) * multiplier;\n    let yDiff = Math.abs(currentPos.top - lastPos.top) * multiplier;\n\n    // set the blur\n    setBlur(xDiff,yDiff);\n    lastPos = currentPos;\n\n    requestAnimationFrame(updateMotionBlur);\n  }\n}\n"],"sourceRoot":"/source/"}